"use strict";(self.webpackChunkstarter_bt5=self.webpackChunkstarter_bt5||[]).push([[305],{1235:(e,t,s)=>{s.r(t),s.d(t,{default:()=>y});var n=s(5043),i=s(8902),o=s(2328),l=s(7218),a=s(4972),r=s(5334),d=s(2799),p=s(2796),c=s(4086),h=s(9775),m=s(4022),x=s(579);const u=e=>{let{userId:t}=e;const[s,i]=(0,n.useState)([]),[o,u]=(0,n.useState)(),y=(0,n.useRef)(null),[g,f]=(0,n.useState)("all"),[z,S]=(0,n.useState)({zoom:7,center:{lat:36.358949,lng:127.7646949}}),[j,w]=(0,n.useState)(null),b={},[v,I]=(0,n.useState)(!0),[k,C]=(0,n.useState)(!1),[E,L]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{fetch("http://localhost:3001/post").then((e=>e.json())).then((e=>{const s=e.filter((e=>e.memberId===t));i(s)})).catch((e=>console.error("Error fetching data:",e)))}),[]),(0,n.useEffect)((()=>{const e=e=>{u({lat:e.coords.latitude,lng:e.coords.longitude})},t=()=>{u({lat:37.5666103,lng:126.9783882})};navigator.geolocation&&navigator.geolocation.getCurrentPosition(e,t)}),[]),(0,n.useEffect)((()=>{const{naver:e}=window;if(y.current&&e&&o){const t=new e.maps.LatLng(o.lat,o.lng),n=new e.maps.Map(y.current,{center:z.center,zoom:z.zoom,minZoom:6,maxZoom:16,zoomControl:!0,zoomControlOptions:{style:e.maps.ZoomControlStyle.SMALL,position:e.maps.Position.TOP_RIGHT}});new e.maps.Marker({position:t,map:n,icon:{url:l,size:new e.maps.Size(28,28),scaledSize:new e.maps.Size(28,28)},zIndex:999});const i=(t,s)=>{const i=new e.maps.LatLng(parseFloat(t.latitude),parseFloat(t.longitude));let o="daily"===t.postType?r:"history"===t.postType?d:a;const l=new e.maps.Marker({position:i,map:n,icon:{url:o,size:new e.maps.Size(43,43),scaledSize:new e.maps.Size(43,43)},zIndex:s});return e.maps.Event.addListener(l,"click",(()=>{x(t.postId,l)})),l},p=e=>{const t=s.find((t=>t.postId===e));return t?"daily"===t.postType?r:"history"===t.postType?d:a:a},m=e=>{const t=s.find((t=>t.postId===e));return t?"daily"===t.postType?c:h:a},x=(t,n)=>{s.find((e=>e.postId===t))&&(j===t?(n.setIcon({url:p(t),size:new e.maps.Size(43,43),scaledSize:new e.maps.Size(43,43)}),w(null)):(w(t),Object.values(b).forEach((t=>{t.setIcon({url:p(t.get("postId")),size:new e.maps.Size(43,43),scaledSize:new e.maps.Size(43,43)})})),n.setIcon({url:m(t),size:new e.maps.Size(43,43),scaledSize:new e.maps.Size(43,43)}),b[t]=n))};s.filter((e=>"all"===g||e.postType===g)).forEach(((e,t)=>{i(e,t)})),e.maps.Event.addListener(n,"zoom_changed",(()=>{S({...z,zoom:n.getZoom()})})),e.maps.Event.addListener(n,"center_changed",(()=>{S({...z,center:n.getCenter()})}))}}),[o,s,g,z]),(0,x.jsxs)("div",{children:[(0,x.jsx)("button",{onClick:()=>{S({zoom:7,center:{lat:"36.358949",lng:"127.7646949"}})},children:(0,x.jsx)("img",{src:m,alt:"refresh",style:{width:"20px",height:"20px",display:"inline-block"}})}),(0,x.jsxs)("div",{style:{display:"inline-block",marginLeft:"280px",border:"3px solid red"},children:[(0,x.jsx)("span",{style:{fontSize:"10px",margin:"3px"},children:"all pin"}),(0,x.jsx)("span",{style:{fontSize:"10px",margin:"3px"},children:"daily pin"}),(0,x.jsx)("span",{style:{fontSize:"10px",margin:"3px"},children:"history pin"}),(0,x.jsx)("br",{}),(0,x.jsx)("button",{onClick:()=>{I(!0),C(!1),L(!1),f("all")},style:{border:"none"},children:(0,x.jsx)("img",{src:v?p:a,alt:"allPin",style:{width:"30px",height:"30px"}})}),(0,x.jsx)("button",{onClick:()=>{I(!1),C(!0),L(!1),f("daily")},style:{border:"none"},children:(0,x.jsx)("img",{src:k?c:r,alt:"dailyPin",style:{width:"30px",height:"30px"}})}),(0,x.jsx)("button",{onClick:()=>{I(!1),C(!1),L(!0),f("history")},style:{border:"none"},children:(0,x.jsx)("img",{src:E?h:d,alt:"historyPin",style:{width:"30px",height:"30px"}})})]}),(0,x.jsx)("div",{ref:y,style:{width:"500px",height:"500px"}})]})},y=()=>{const[e,t]=(0,n.useState)([]),s="id_222";return(0,n.useEffect)((()=>{fetch("http://localhost:3001/post").then((e=>e.json())).then((e=>{const n=e.filter((e=>e.memberId===s));t(n)})).catch((e=>console.error("Error fetching data:",e)))}),[]),(0,x.jsxs)("div",{id:"local-con",style:{border:"5px solid red",display:"flex",width:"950px"},children:[(0,x.jsx)("div",{id:"map-con",style:{border:"3px solid blue"},children:(0,x.jsxs)("div",{children:[(0,x.jsx)("span",{className:"initial-main-page-text",children:"\ub9c8\uc774\ub9f5"}),(0,x.jsx)(u,{userId:s})]})}),(0,x.jsxs)("div",{className:"initial-main-page-frame",style:{border:"3px solid green",marginLeft:"20px"},children:[(0,x.jsxs)("span",{className:"initial-main-page-text",children:["\uac8c\uc2dc\uae00  ",e.length]}),(0,x.jsx)("div",{style:{border:"3px solid yellow",overflow:"auto",marginTop:"10%",width:"410px",height:"640px"},children:e.map((e=>"daily"===e.postType?(0,x.jsx)(i.A,{data:e},e.id):"history"===e.postType?(0,x.jsx)(o.A,{data:e},e.id):null))})]})]})}}}]);
//# sourceMappingURL=305.a907cb4a.chunk.js.map